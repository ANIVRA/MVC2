@model MVC2.Models.Post

@{
    ViewBag.Title = "Details";
}

@using MVC2.Models
@using Microsoft.AspNet.Identity

<section class="text-block">
    <div class="light-bg">
        <div class="container">
            <div class="row-fluid">
                <div class="span9">
                    <h2 class="with-border">@Model.Title </h2>
                    <div class="thumbnail">
                        <div class="img-wrap">
                            <img src="@Url.Content(Model.MediaURL)" />
                        </div>
                        <div class="info-panel clearfix" style="padding-top: 5px">
                            <span class="pull-left"><time datetime=""><i class="icon-calendar "></i> @Model.Created.ToString("MMM dd, yyyy")</time></span>
                            <span class="pull-right"><i class="icon-user"></i> Antonio Raynor </span>
                        </div>
                        <p>@Model.Body</p>
                        <a href="@Url.Action("Create", "Comments", routeValues: new { id = Model.Id})" class="pull-right"><i class="icon-share-alt"></i> Reply</a>
                        <button type="button" id="thecomment" class="btn btn-success" onclick=toggle("addcomment")>Add Comment</button>
                    </div>
                    <div class="section">
                        <h3 class="with-border"><i class="icon-comments"></i> @Model.Comments.Count comment(s)</h3>
                        <div class="section comments-block">
                            @Html.Partial("_GrinyComments", @Model.Comments.ToList())
                        </div>
                        <div id="addcomment" style="display:none">
                            @Html.Partial("_AddComment", new MVC2.Models.Comment() { PostId = Model.Id })
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

@section scripts{
    <script>
        function toggle(id) {
            var element = document.getElementById(id);

            if (element) {
                var display = element.style.display;

                if (display == "none") {
                    element.style.display = "block";
                    thecomment.value = "Hide Code";
                } else {
                    element.style.display = "none";
                    thecomment.value = "Show Code";
                }
            }
        }
    </script>
}
